### 响应式: 工具

### 1. toRefs()

- 作用：创建一个 ref 对象，使其 value 值指向另一个对象中的某个属性
- 语法：`const name = toRef(person, 'name')`
- 应用：要将响应式对象中的某个属性单独给外部使用时
- 扩展：`toRefs`与`toRef`功能一致，但`toRefs`可以批量创建多个`ref`对象，语法：`toRefs(person)`

```vue
// 普通写法
<template>
  <h2>姓名：{{ person.name }}</h2>
  <h2>年龄：{{ person.age }}</h2>
  <h2>薪资：{{ person.job.j1.salary }}</h2>
  <button @click="person.name += '~'">改变姓名</button>
  <button @click="person.age++">改变年龄</button>
  <button @click="person.job.j1.salary++">涨薪</button>
</template>

<script>
import {reactive} from 'vue'
export default {
    name: 'Demo',
    setup() {
        let person = reactive({
            name:'banana',
            age:18,
            job:{
                j1: {
                    salary: 100
                }
            }
        }),

        return { person }
    },
}
</script>

// toRef写法
<template>
  <h2>姓名：{{ name }}</h2>
  <h2>年龄：{{ age }}</h2>
  <h2>薪资：{{ salary }}</h2>
  <button @click="name += '~'">改变姓名</button>
  <button @click="age++">改变年龄</button>
  <button @click="salary++">涨薪</button>
</template>

<script>
import {reactive, toRef，toRefs} from 'vue'
export default {
    name: 'Demo',
    setup() {
        let person = reactive({
            name:'banana',
            age:18,
            job:{
                j1: {
                    salary: 100
                }
            }
        }),

        const name = toRef(person, 'name')
        console.log('toRef', name) // 可以看到这是RefImpl对象

        const x = toRefs(person)
        console.log('toRefs', x) // 可以看到这是个RefImpl对象

        return {
            name: toRef(person, 'name'),
            name: toRef(person, 'age'),
            job: toRef(person.job.j1, 'salary')
            // 使用toRefs
            // ...toRefs(person) //注意着只能遍历出来person的第一层对象
            // 所以如果用这个toRefs的时候，salary要用job.j1.salary
        }

        // 错误例子1: 这里是生成了一个全新的ref变量给name，当修改name时，页面展示
        //         的name会发生改变，但是真正的person的数据没有发生改变
        // 本质上是添加了对原响应式数据的一个引用
        // return {
            // person,
            // name: ref(person, 'name'),
            // age: ref(person, 'age'),
            // job: ref(person.job.j1, 'salary')
        // }

        // 错误例子2: name: person.name相当于name: 'banana'，
        //。        数据改变时不会响应式
        // return {
            // person,
            // name: person.name,
            // age: person.age,
            // job: person.job.j1.salary)
        // }
    },
}
</script>
```

- isRef: 检查一个值是否为一个 ref 对象
- isReactive: 检查一个对象是否由 reactive 创建的响应式数据
- isReadonly: 检查一个对象是否由 readonly 创建的只读代理
- isProxy：检查一个对象是否是由 reactive 或者 readonly 方法创建的代理
