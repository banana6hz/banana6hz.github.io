### 数据检测

vue 中大魔法之一就是数据的双向绑定，而数据的双向绑定是依赖于数据检测的，这个数据监测是怎么实现的呢？是通过`Object.defineProperty()`实现的哦

```js
function Observe(obj) {
  const keys = Object.keys(obj);
  keys.forEach((k) => {
    Object.defineProperty(this, k, {
      get() {
        return obj[key];
      },
      set(val) {
        obj[key] = val;
      },
    });
  });
}
```

- 检测的时候，如果`get`和`set`是用的本身，会造成死循环，所以检测的时候需要用`this`
- 不能检测到新属性，如果需要检测新加的属性，需要用`vue.$set`。而且只能给 data 里面的对象添加新属性，不能直接给 data 添加新属性
- `Object.defineProperty`是不能检测数组的变化的，vue 改写了数组的七个方法，实现了：1. 调用 Array.prototype.push 2. 重新解析模版,进而更新页面
- 在 vue 里面修改数组可以用那七个方法，也可以用 vue.$set
