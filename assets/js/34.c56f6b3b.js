(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{406:function(e,t,a){"use strict";a.r(t);var s=a(33),n=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h3",{attrs:{id:"一、快速搭建一个koa项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、快速搭建一个koa项目"}},[e._v("#")]),e._v(" 一、快速搭建一个koa项目")]),e._v(" "),a("hr"),e._v(" "),a("ol",[a("li",[e._v("检查Node版本，至少在7.6.0以上。")]),e._v(" "),a("li",[e._v("使用快速搭建工具 "),a("code",[e._v("npm install koa-generator -g")])]),e._v(" "),a("li",[e._v("生成项目 "),a("code",[e._v("koa2 project-name")])]),e._v(" "),a("li",[e._v("安装依赖 "),a("code",[e._v("npm install")])]),e._v(" "),a("li",[e._v("运行 "),a("code",[e._v("npm start")]),e._v(" 打开 http://localhost:3000")])]),e._v(" "),a("hr"),e._v(" "),a("hr"),e._v(" "),a("h3",{attrs:{id:"二、手动搭建一个koa项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、手动搭建一个koa项目"}},[e._v("#")]),e._v(" 二、手动搭建一个koa项目")]),e._v(" "),a("hr"),e._v(" "),a("ol",[a("li",[e._v("检查Node版本，至少在7.6.0以上。")]),e._v(" "),a("li",[e._v("创建并进入项目文件夹，"),a("code",[e._v("npm init")]),e._v(", 初始化packjson.js")]),e._v(" "),a("li",[e._v("安装koa"),a("code",[e._v("npm install koa --save")])]),e._v(" "),a("li",[e._v("在根目录下创建"),a("code",[e._v("app.js")]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v(" const Koa = require('koa');\n const app = new Koa();  \n app.use(async ctx => {\n ctx.body = 'Hello koa!';\n });    \n app.listen(3000);\n")])])])]),e._v(" "),a("li",[e._v("在"),a("code",[e._v("package.json")]),e._v("添加启动命令"),a("code",[e._v('"start": "node app.js"')])]),e._v(" "),a("li",[a("code",[e._v("npm run start")]),e._v("启动服务，打开"),a("code",[e._v("http://localhost:3000")]),e._v("，这样koa的房产证🏠就拿到啦！下面让我们来开始搬砖建房子💪")]),e._v(" "),a("li",[e._v("在项目下创建一个存放html文件的目录views，并在该目录下创建一个"),a("code",[e._v("index.html")]),e._v("，然后修改"),a("code",[e._v("app.js")]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// app.js// 原生路由\nconst Koa = require('koa');\nconst fs = require('fs');\nconst app = new Koa(); \napp.use(async (ctx, next) => {\nif (ctx.request.path === '/index') {\nctx.type = 'text/html';\nctx.body = fs.createReadStream('./views/index.html');\n} else {\nawait next();\n}\n});\napp.listen(3000);\n")])])])]),e._v(" "),a("li",[e._v("安装路由中间件"),a("code",[e._v("npm install koa-router -S")])]),e._v(" "),a("li",[e._v("新建"),a("code",[e._v("routes")]),e._v("目录，用来存放路由文件，并在目录下创建"),a("code",[e._v("index.js")]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// routes/index.js\n\nconst fs = require('fs');\nconst router = require('koa-router')()\n\nrouter.get('/', async (ctx, next) => {\nctx.type = 'text/html';\nctx.body = fs.createReadStream('./views/index.html');\n});\n\nmodule.exports = router\n")])])]),e._v("这样直接访问页面出来的就是👉view文件夹下index.html的内容了")]),e._v(" "),a("li",[e._v("安装koa-static，并新建public文件夹存放静态资源，运行"),a("code",[e._v("npm install koa-static -S")]),e._v(",然后在app.js里添加以下代码"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("const static = require('koa-static')// allowedMethods 用于校验请求的方法，如果用 post 请求访问 get 接口，就会直接返回失败     \nconst main = static(_dirname + '/public')// 将 public 目录设置为静态资源目录      \napp.use(main)\n")])])])]),e._v(" "),a("li",[e._v("安装koa-views "),a("code",[e._v("npm install koa-views -S")]),e._v(",在app.js添加一下代码"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("const views = require('koa-views')\napp.use(views(_dirname + '/views')\n")])])])]),e._v(" "),a("li",[e._v("然后在路由文件中，就能使用 render 方法了"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// routes/index.js\n\nconst router = require('koa-router')()\n\nrouter.get('/index', async (ctx, next) => {\nawait ctx.render('index');\n});\n\nmodule.exports = router\n")])])])])])])}),[],!1,null,null,null);t.default=n.exports}}]);